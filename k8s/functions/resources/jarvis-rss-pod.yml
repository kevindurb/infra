---
apiVersion: v1
kind: Pod
metadata:
  name: jarvis-rss
  labels:
    app.kubernetes.io/name: jarvis-rss
spec:
  containers:
    - name: functions
      image: ghcr.io/kevindurb/functions:v1.0.5
      command: ['@functions/jarvis-rss']
      resources:
        requests:
          memory: 100M
        limits:
          memory: 1G
      securityContext:
        privileged: false
        allowPrivilegeEscalation: false
        runAsNonRoot: true
        runAsUser: 1000
        runAsGroup: 1000
        readOnlyRootFilesystem: true
        capabilities:
          drop: [ALL]
      env:
        - name: TZ
          value: America/Denver
        - name: PORT
          value: '1337'
      ports:
        - name: http
          containerPort: 1337
