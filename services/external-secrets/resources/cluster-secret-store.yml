---
apiVersion: external-secrets.io/v1beta1
kind: ClusterSecretStore
metadata:
  name: bitwarden-login
spec:
  provider:
    webhook:
      url: 'http://bitwarden-service.bitwarden:8087/object/item/{{ .remoteRef.key }}'
      headers:
        Content-Type: application/json
      result:
        jsonPath: '$.data.login.{{ .remoteRef.property }}'

---
apiVersion: external-secrets.io/v1beta1
kind: ClusterSecretStore
metadata:
  name: bitwarden-fields
spec:
  provider:
    webhook:
      url: 'http://bitwarden-service.bitwarden:8087/object/item/{{ .remoteRef.key }}'
      result:
        jsonPath: '$.data.fields[?@.name==\"{{ .remoteRef.property }}\"].value'

---
apiVersion: external-secrets.io/v1beta1
kind: ClusterSecretStore
metadata:
  name: bitwarden-notes
spec:
  provider:
    webhook:
      url: 'http://bitwarden-service.bitwarden:8087/object/item/{{ .remoteRef.key }}'
      result:
        jsonPath: '$.data.notes'

---
apiVersion: external-secrets.io/v1beta1
kind: ClusterSecretStore
metadata:
  name: gitlab-secret-store
spec:
  provider:
    gitlab:
      auth:
        SecretRef:
          accessToken:
            name: gitlab-secret
            key: token
            namespace: external-secrets
      projectID: '52558359'
