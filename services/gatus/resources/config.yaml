---
metrics: true

default-endpoint: &defaults
  alerts:
    - type: pushover
  interval: 5m
  client:
    insecure: true
  conditions:
    - '[STATUS] == 200'

alerting:
  pushover:
    application-token: ${PUSHOVER_APPLICATION_TOKEN}
    user-key: ${PUSHOVER_USER_KEY}
    priority: 2
    default-alert:
      send-on-resolved: true

storage:
  type: sqlite
  path: /data/data.db

endpoints:
  - name: Jellyfin
    group: Applications
    url: http://jellyfin-service/health
    <<: *defaults

  - name: Home Assistant
    group: Applications
    url: http://home-assistant-service/manifest.json
    <<: *defaults

  - name: Frigate
    group: Applications
    url: http://frigate-service/api/version
    <<: *defaults

  - name: Google
    group: Admin
    url: https://google.com
    <<: *defaults

  - name: OpenWRT
    group: Admin
    url: https://192.168.1.1
    <<: *defaults

  - name: TrueNAS
    group: Admin
    url: https://192.168.100.201/api/docs/
    <<: *defaults

  - name: Radarr
    group: Applications
    url: http://radarr-service/ping
    <<: *defaults

  - name: Sonarr
    group: Applications
    url: http://sonarr-service/ping
    <<: *defaults

  - name: Mealie
    group: Applications
    url: http://mealie-service/api/app/about
    <<: *defaults

  - name: Prometheus
    group: Admin
    url: http://prometheus-service.monitoring/-/healthy
    <<: *defaults

  - name: Alertmanager
    group: Admin
    url: http://alertmanager-service.monitoring/-/healthy
    <<: *defaults

  - name: Homepage
    group: Applications
    url: http://homepage-service/api/healthcheck
    <<: *defaults

  - name: Nextcloud
    group: Applications
    url: http://nextcloud-service/ocs/v2.php/apps/serverinfo/api/v1/info
    conditions:
      - '[STATUS] < 500'
    <<: *defaults

  - name: Kavita
    group: Applications
    url: http://kavita-service/api/health
    <<: *defaults
