# !yamlfmt!:ignore
---
# yaml-language-server: $schema=https://www.authelia.com/schemas/v4.38/json-schema/configuration.json
theme: auto

log:
  level: debug

totp:
  disable: false
  issuer: authelia.com

webauthn:
  disable: true

duo_api:
  disable: true

authentication_backend:
  password_reset:
    disable: true
  file:
    path: /config/users.yml

access_control:
  default_policy: two_factor

session:
  redis:
    host: authelia-session-service

  cookies:
    - domain: durbin.casa
      authelia_url: https://auth.durbin.casa

storage:
  postgres: {}

notifier:
  disable_startup_check: false
  smtp:
    address: smtp.fastmail.com:465
identity_providers:
  oidc:
    # prettier-ignore
    jwks:
      - key: {{ env "OIDC_JWKS_KEY" | mindent 10 "|" | msquote }}
    cors:
      endpoints:
        - authorization
        - token
        - revocation
        - introspection
        - userinfo
      allowed_origins_from_client_redirect_uris: true
    clients:
      - client_name: Example
        client_id: example
        # prettier-ignore
        client_secret: {{ env "EXAMPLE_CLIENT_SECRET_HASH" | msquote }}
        public: false
        authorization_policy: two_factor
        pre_configured_consent_duration: 1y
        scopes: ['openid', 'profile', 'groups', 'email']
        redirect_uris: ['https://example.com']
        userinfo_signed_response_alg: none
