(tls) {
  header / Strict-Transport-Security "max-age=15552000;"

  tls {
    dns cloudflare {$CLOUDFLARE_API_TOKEN}
    resolvers 1.1.1.1
  }
}

ping.{$DOMAIN} {
  respond "pong"
  import tls
}

whoami.{$DOMAIN} {
  reverse_proxy whoami:8000
  import tls
}

grafana.{$DOMAIN} {
  reverse_proxy grafana:3000
  import tls
}

jellyfin.{$DOMAIN} {
  reverse_proxy jellyfin:8096
  import tls
}

nodered.{$DOMAIN} {
  reverse_proxy nodered:1880
  import tls
}

prometheus.{$DOMAIN} {
  reverse_proxy prometheus:9090
  import tls
}

freshrss.{$DOMAIN} {
  reverse_proxy freshrss:80
  import tls
}

adminer.{$DOMAIN} {
  reverse_proxy adminer:8080
  import tls
}

guacamole.{$DOMAIN} {
  reverse_proxy guacamole:8080
  import tls
}

firefly.{$DOMAIN} {
  reverse_proxy firefly:8080
  import tls
}

homeassistant.{$DOMAIN} {
  reverse_proxy homeassistant:8123
  import tls
}

nextcloud.{$DOMAIN} {
  reverse_proxy nextcloud:80
  import tls
}
